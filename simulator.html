<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>InvestoLab - Simulation</title>
  <link rel="stylesheet" href="styles.css?v=20260228b" />
  <script src="nav.js?v=20260227h" defer></script>
  <script src="config.js?v=20260227a" defer></script>
  <script src="api-base.js?v=20260227p" defer></script>
</head>
<body>
  <nav class="taskbar">
    <a href="./index.html" class="brand">InvestoLab</a>
    <div class="task-links">
      <a href="./index.html">Overview</a>
      <div class="nav-dropdown">
        <a href="./valuation-lab.html" class="nav-dropdown-toggle">Valuation Lab</a>
        <div class="nav-dropdown-menu">
          <a href="./valuation.html">Investment Valuation</a>
          <a href="./portfolio-builder.html">Portfolio Valuation</a>
        </div>
      </div>
      <div class="nav-dropdown">
        <a href="./investotype.html" class="nav-dropdown-toggle active">InvestoType</a>
        <div class="nav-dropdown-menu">
          <a href="./simulator.html">Simulation</a>
          <a href="./quiz.html">Quiz</a>
          <a href="./investor-types.html">Types</a>
          <a href="./investotype-portfolio.html">AI Portfolio</a>
        </div>
      </div>
            <div class="nav-dropdown">
        <a href="./news.html" class="nav-dropdown-toggle">News</a>
        <div class="nav-dropdown-menu">
          <a href="./news-market.html">Market</a>
          <a href="./news-tailored.html">Tailored</a>
          <a href="./news-investment-day.html">Day Pick</a>
          <a href="./news-investment-week.html">Week Pick</a>
          <a href="./news-investment-month.html">Month Pick</a>
          <a href="./news-investment-year.html">Year Pick</a>
        </div>
      </div>
      <a href="./about.html">About</a>
    </div>
  </nav>

  <header class="hero page-hero">
    <h1>Investment Simulation</h1>
    <p>Test your portfolio decisions on past market data.</p>
  </header>

  <main class="single-layout">
    <section class="card">
      <div class="slide-steps">
        <span id="stepSetup" class="step-pill active">1. Setup</span>
        <span id="stepGame" class="step-pill">2. Simulate</span>
        <span id="stepResult" class="step-pill">3. Result</span>
        <span id="stepInvestor" class="step-pill">4. Analysis</span>
      </div>

      <div id="slideSetup" class="sim-slide active">
        <form id="simStartForm" class="form-grid">
          <div class="setup-kickoff">
            <h3>Set Up Your Simulation</h3>
            <p>Finish these steps, review, then start.</p>
            <div class="setup-step-list">
              <span id="setupStep1" class="active">1. Simulation Settings</span>
              <span id="setupStep2">2. Create Portfolio</span>
              <span id="setupStep3">3. Compare Indexes</span>
            </div>
          </div>

          <div id="setupCardSettings" class="setup-card expanded" data-setup-stage="settings">
            <button id="setupToggleSettings" type="button" class="setup-card-toggle">
              <span class="setup-title-row"><span>1. Simulation Settings</span><span id="checkSettings" class="setup-check">??/span></span>
              <small id="setupSettingsPreview">Timeline, budget, and rebalance pace</small>
            </button>
            <div class="setup-card-body setup-section">
              <div class="setup-section-headline">
                <h3>Simulation Settings</h3>
                <p>Set date range, starting cash, and rebalance frequency.</p>
              </div>
              <div class="setup-cash-row">
                <label>
                  Initial Virtual Cash (USD)
                  <input id="simInitialCash" type="text" inputmode="numeric" value="" required />
                </label>
                <div class="cash-samples" aria-label="Initial cash quick add samples">
                  <button type="button" class="ghost cash-sample-btn" data-add-cash="100">+100</button>
                  <button type="button" class="ghost cash-sample-btn" data-add-cash="1000">+1000</button>
                  <button type="button" class="ghost cash-sample-btn" data-add-cash="10000">+10000</button>
                </div>
              </div>
              <div class="setup-grid">
                <label>
                  Start Date
                  <input id="simStartDate" type="date" required />
                </label>
                <label>
                  End Date
                  <input id="simEndDate" type="date" required />
                </label>
                <label>
                  Rebalance Frequency
                  <select id="simFrequency">
                    <option value="daily">Daily</option>
                    <option value="weekly">Weekly</option>
                    <option value="monthly" selected>Monthly</option>
                  </select>
                </label>
              </div>
              <div class="setup-section-actions">
                <button id="settingsNextBtn" type="button">Next: Create Portfolio</button>
              </div>
            </div>
          </div>

          <div id="setupCardPortfolio" class="setup-card" data-setup-stage="portfolio">
            <button id="setupTogglePortfolio" type="button" class="setup-card-toggle">
              <span class="setup-title-row"><span>2. Create Portfolio</span><span id="checkPortfolio" class="setup-check">??/span></span>
              <small id="setupPortfolioPreview">Add investments and set initial allocation</small>
            </button>
            <div class="setup-card-body setup-section asset-builder">
              <div class="setup-section-headline">
                <div class="setup-headline-row">
                  <h3>Create a Portfolio</h3>
                  <button id="setupAiComboBtn" type="button" class="ghost">AI Combination</button>
                </div>
                <p>Add investments, then set your starting allocation.</p>
              </div>
              <div class="asset-grid simple-add">
                <label class="asset-search-field">
                  <div class="search-wrap">
                    <input id="assetSymbol" type="text" placeholder="Apple, SPY, BTC-USD, TLT, CASH..." autocomplete="off" />
                    <div id="assetSearchDropdown" class="search-dropdown hidden"></div>
                  </div>
                </label>
                <button id="addAssetBtn" type="button">Add To Portfolio</button>
              </div>
              <p class="asset-help asset-help-center">Search by company name or ticker.</p>
              <div id="assetList" class="asset-list"></div>
              <div id="setupAllocBlock" class="setup-alloc-block">
                <div class="setup-alloc-head">
                  <strong>Initial Allocation (USD or Units)</strong>
                  <div class="setup-alloc-actions">
                    <button id="setupAiSplitBtn" type="button" class="ghost">AI Split</button>
                    <button id="setupEqualSplitBtn" type="button" class="ghost">Equal Split</button>
                    <button id="setupRandomSplitBtn" type="button" class="ghost">Random Split</button>
                  </div>
                </div>
                <div class="setup-alloc-layout">
                  <div id="setupAllocationRows" class="setup-alloc-grid"></div>
                </div>
                <div id="setupAllocationSummary" class="asset-help">Allocated: $0.00 | Cash Left: $0.00</div>
                <div class="setup-cashbar-track">
                  <div id="setupCashbarFill" class="setup-cashbar-fill"></div>
                </div>
                <div id="setupPieWrap" class="setup-pie-wrap hidden">
                  <canvas id="setupPieChart" width="920" height="420"></canvas>
                  <div id="setupPieLegend" class="chart-legend"></div>
                </div>
              </div>
              <div class="setup-section-actions">
                <button id="setupTogglePieBtn" type="button" class="ghost hidden">Show Chart</button>
                <button id="portfolioNextBtn" type="button">Next: Set Benchmarks</button>
              </div>
            </div>
          </div>

          <div id="setupCardBenchmark" class="setup-card" data-setup-stage="benchmark">
            <button id="setupToggleBenchmark" type="button" class="setup-card-toggle">
              <span class="setup-title-row"><span>3. Compare Indexes</span><span id="checkBenchmark" class="setup-check">??/span></span>
              <small id="setupBenchmarkPreview">Select benchmark indexes for comparison</small>
            </button>
            <div class="setup-card-body setup-section">
              <div class="setup-section-headline">
                <h3>Benchmark Comparison</h3>
                <p>Pick indexes to compare your results.</p>
              </div>
              <label>
                Compare With Indexes
                <div class="benchmark-picker">
                  <select id="benchmarkSelect">
                    <option value="^GSPC">S&P 500 (^GSPC)</option>
                    <option value="^IXIC">NASDAQ Composite (^IXIC)</option>
                    <option value="SPY">SPDR S&P 500 ETF (SPY)</option>
                    <option value="QQQ">Invesco QQQ (QQQ)</option>
                    <option value="DIA">Dow Jones ETF (DIA)</option>
                    <option value="IWM">Russell 2000 ETF (IWM)</option>
                    <option value="VTI">Total US Market ETF (VTI)</option>
                    <option value="VEA">Developed Markets ETF (VEA)</option>
                    <option value="EEM">Emerging Markets ETF (EEM)</option>
                    <option value="TLT">20+ Year Treasury ETF (TLT)</option>
                    <option value="GLD">Gold ETF (GLD)</option>
                    <option value="BTC-USD">Bitcoin (BTC-USD)</option>
                  </select>
                  <button id="addBenchmarkBtn" type="button" class="ghost">Add Index</button>
                  <button id="clearBenchmarkBtn" type="button" class="ghost">Clear All</button>
                </div>
                <div id="benchmarkChosen" class="asset-list"></div>
                <div class="asset-help asset-help-center">Selected indexes will be overlaid on your result chart.</div>
              </label>
              <div class="setup-section-actions">
                <button id="benchmarkNextBtn" type="button">View Summary</button>
              </div>
            </div>
          </div>

          <div id="setupCardSummary" class="setup-card" data-setup-stage="summary">
            <button id="setupToggleSummary" type="button" class="setup-card-toggle">
              <span class="setup-title-row"><span>Summary</span><span id="checkSummary" class="setup-check">??/span></span>
              <small>Review choices and start simulation</small>
            </button>
            <div class="setup-card-body setup-section">
              <div class="setup-summary-shell">
                <div class="setup-summary-hero">
                  <h3>Summary of Decisions</h3>
                  <p>Review your setup before you start.</p>
                </div>
                <div class="setup-summary-grid">
                  <div class="setup-summary-item">
                    <strong>Simulation Settings</strong>
                    <div id="summarySettings"></div>
                  </div>
                  <div class="setup-summary-item">
                    <strong>Portfolio</strong>
                    <div id="summaryPortfolio"></div>
                  </div>
                  <div class="setup-summary-item">
                    <strong>Benchmarks</strong>
                    <div id="summaryBenchmarks"></div>
                  </div>
                </div>
                <div class="setup-cta">
                  <button type="submit">Start Simulation</button>
                  <span>Ready to begin? Start Simulation to open the live simulator.</span>
                </div>
              </div>
            </div>
          </div>
        </form>
      </div>

      <div id="slideGame" class="sim-slide">
        <div id="simPanel" class="hidden sim-shell">
          <p id="simNextDate"></p>
          <div id="simQuickNav" class="sim-quicknav">
            <button type="button" class="ghost" data-jump="snapshot">Snapshot</button>
            <button type="button" class="ghost" data-jump="adjustment">Adjustments</button>
            <button type="button" class="ghost" data-jump="charts">Charts</button>
            <button type="button" class="ghost" data-jump="controls">Controls</button>
            <span class="sim-shortcuts-hint">Shortcuts: N next, P automate/pause, S result</span>
          </div>

          <div class="sim-section-head compact">
            <h4>Simulation Control Center</h4>
            <p>Track progress and adjust positions as you go.</p>
          </div>

          <div class="budget-card sim-topbar-card">
            <div class="budget-row">
              <strong id="budgetSummary">Allocated Value: $0.00 / $0.00 (0.00%)</strong>
              <span id="periodDecisionTimer" class="period-decision-timer">Period timer: 01:00</span>
              <span id="budgetHint">Planned values update instantly as you edit.</span>
            </div>
            <div class="budget-track">
              <div id="budgetFill" class="budget-fill"></div>
            </div>
          </div>

          <div id="periodPanel" class="chart-card">
            <h4 id="periodTitle">Current Period Snapshot</h4>
            <div id="periodCards" class="result-grid"></div>
            <div id="holdingsTable"></div>
          </div>

          <div id="simCommentary" class="commentary-card">
            <h4>Market Briefing and Portfolio Signals</h4>
            <p id="commentaryLead">Start a simulation to see market context, benchmark moves, and buy/sell decision cues each period.</p>
            <div class="briefing-search-row">
              <label class="briefing-search-label" for="briefingSearchInput">Search Market Intel</label>
              <div class="briefing-search-controls">
                <input id="briefingSearchInput" type="text" placeholder="Try AAPL, Nvidia, BTC-USD, TLT..." />
                <button id="briefingSearchBtn" type="button" class="ghost">Search</button>
              </div>
              <div id="briefingSearchStatus" class="briefing-search-status">Search any asset for period performance, earnings timing, and headlines at this simulation step.</div>
              <div id="briefingSearchResults" class="briefing-search-results"></div>
            </div>
            <div id="commentaryStatus" class="commentary-status">Status updates will appear here.</div>
            <div id="commentaryList" class="commentary-list"></div>
          </div>

          <div class="sim-section-head">
            <h4>Portfolio Adjustment</h4>
            <p>Adjust existing holdings and add new investments to your simulation.</p>
            <div class="sim-sort-row">
              <label>
                Sort By
                <select id="allocationSortBy">
                  <option value="current_value">Current Value</option>
                  <option value="profit">Profit</option>
                  <option value="target_value">Planned Value</option>
                  <option value="name">Name</option>
                </select>
              </label>
              <label>
                Order
                <select id="allocationSortDir">
                  <option value="desc">High to Low</option>
                  <option value="asc">Low to High</option>
                </select>
              </label>
            </div>
          </div>
          <div id="allocationRows" class="alloc-grid"></div>
          <div class="sim-add-under">
            <h5>Add Investment To Portfolio</h5>
            <div class="sim-add-inline">
              <label>
                Add Type
                <select id="simAddType">
                  <option value="stock">Market Asset</option>
                  <option value="crypto">Cryptocurrency</option>
                  <option value="bond">Bond ETF</option>
                  <option value="cash">Cash</option>
                  <option value="savings">Savings</option>
                  <option value="leverage">Leverage</option>
                  <option value="option">Option-like</option>
                </select>
              </label>
              <label id="simAddSymbolWrap">
                Symbol / Company
                <input id="simAddSymbol" type="text" placeholder="AAPL, BTC, or Bitcoin" />
              </label>
              <label id="simAddMultiplierWrap" class="hidden">
                Multiplier
                <input id="simAddMultiplier" type="number" min="1.1" max="8" step="0.1" value="2" />
              </label>
              <button id="simAddAssetBtn" type="button" class="ghost">Add Investment</button>
            </div>
          </div>

          <div id="simChartsSection" class="sim-analytics-grid">
            <div class="chart-card">
              <div class="chart-head-row">
                <h4>Portfolio vs Indexes Over Time</h4>
                <label class="chart-mode-pick">
                  Compare Index
                  <select id="chartBenchmarkFilter">
                    <option value="all">All Selected Indexes</option>
                    <option value="none">Portfolio Only</option>
                  </select>
                </label>
                <label class="chart-mode-pick">
                  Fluctuation View
                  <select id="fluctuationView">
                    <option value="daily">Daily</option>
                    <option value="weekly" selected>Weekly</option>
                    <option value="monthly">Monthly</option>
                  </select>
                </label>
              </div>
              <canvas id="timeflowChart" width="960" height="260"></canvas>
              <div id="timeflowLegend" class="chart-legend"></div>
            </div>
          </div>

          <div id="simControlsSection" class="row sim-action-bar">
            <div id="simFloatingActions" class="sim-action-row sim-action-row-primary hidden">
              <div class="floating-time">
                <div class="floating-time-head">
                  <strong id="floatingTimeLabel">Time Progress: 0 / 0</strong>
                  <span id="floatingTimePercent">0.00%</span>
                </div>
              <div class="floating-time-track">
                <div id="floatingTimeFill" class="floating-time-fill"></div>
              </div>
              <div id="floatingTimeTicks" class="floating-time-ticks"></div>
              </div>
              <button id="autoPlayBtn" type="button">Automate</button>
              <button id="rebalanceBtn" type="button">Advance to Next Period</button>
            </div>
          </div>

          <div class="sim-bottom-actions">
            <button id="finishBtn" type="button">Skip to Result</button>
          </div>
        </div>
      </div>

      <div id="slideResult" class="sim-slide">
        <div id="resultPanel">
          <div class="result-hero" id="resultHero">
            <div class="result-hero-main">
              <p id="resultEyebrow" class="result-eyebrow">Simulation Summary</p>
              <h3 id="resultHeadline">Simulation Results</h3>
              <p id="resultSubline" class="result-subline">Review portfolio outcome, benchmark edge, and end-state risk profile.</p>
            </div>
            <div id="resultEdgeChip" class="result-edge-chip flat">Edge: --</div>
          </div>
          <div id="resultHighlights" class="result-highlights"></div>
          <section class="result-section">
            <div class="result-section-head">
              <h4>Performance Metrics</h4>
              <p>A full summary of return, risk, fees, and simulation behavior.</p>
            </div>
            <div id="resultCards" class="result-grid"></div>
          </section>
          <section class="result-section">
            <div class="result-section-head">
              <h4>Benchmarks and Charts</h4>
              <p>See how your portfolio moved over time and how your final allocation ended.</p>
            </div>
            <div class="result-analytics">
              <div id="benchmarkPanel" class="chart-card result-benchmark-panel">
                <h4>Benchmark Comparison</h4>
                <p class="chart-subtitle">Portfolio return versus selected indexes.</p>
                <div id="benchmarkList"></div>
              </div>
              <div class="chart-grid result-chart-grid">
                <div class="chart-card chart-card-timeline">
                  <h4>Portfolio Value Timeline</h4>
                  <p class="chart-subtitle">Tracks portfolio value against each benchmark during the full simulation.</p>
                  <canvas id="equityChart" width="960" height="300"></canvas>
                  <div id="equityLegend" class="chart-legend"></div>
                </div>
                <div class="chart-card chart-card-allocation">
                  <h4>Final Allocation Mix</h4>
                  <p class="chart-subtitle">Shows weight and dollar contribution of each holding at the end.</p>
                  <canvas id="allocationChart" width="480" height="300"></canvas>
                </div>
              </div>
            </div>
          </section>
          <div class="row result-actions">
            <button id="investorTypeBtn" type="button">Open Analysis</button>
          </div>
        </div>
      </div>

      <div id="slideInvestor" class="sim-slide">
        <div id="investorPanel" class="investor-panel">
          <div class="investor-hero">
            <p class="investor-eyebrow">Analysis</p>
            <h3 id="investorTypeTitle">You are a...</h3>
            <p id="investorTypeSummary" class="investor-summary">Complete your simulation result first to generate your analysis.</p>
            <div id="investorTypeBadge" class="investor-type-badge">Type Pending</div>
          </div>

          <section class="chart-card investor-axis-combined">
              <h4>3-Axis Profile Breakdown</h4>
              <p id="investorAxisSummary" class="investor-axis-summary">Your axis explanation will appear here after analysis.</p>
              <div class="investor-axis-layout">
                <div class="investor-axis-left">
                  <div id="investorAxisChips" class="investor-axis-chips"></div>
                </div>
                <div class="investor-axis-right">
                  <div class="investor-cube-head">
                    <h4>Score Nebula</h4>
                  </div>
                  <div id="axis3dStage" class="axis-3d-stage">
                    <canvas id="axis3dCanvas" width="560" height="360"></canvas>
                    <div id="axis3dHoverTip" class="axis-3d-hover hidden"></div>
                  </div>
                </div>
              </div>
          </section>

          <div class="investor-grid">
            <section class="chart-card investor-card investor-card-lead investor-span-12">
              <h4>How To Invest Going Forward</h4>
              <ul id="investorForwardList" class="investor-list"></ul>
            </section>
            <section class="chart-card investor-card investor-span-6">
              <h4>Recommended Portfolio Mix</h4>
              <ul id="investorPortfolioMixList" class="investor-list"></ul>
            </section>
            <section class="chart-card investor-card investor-span-6">
              <h4>Best-Fit Investments</h4>
              <ul id="investorBestFitList" class="investor-list"></ul>
            </section>
            <section class="chart-card investor-card investor-span-6">
              <h4>Your Investment Habits</h4>
              <ul id="investorHabitsList" class="investor-list"></ul>
            </section>
            <section class="chart-card investor-card investor-span-6">
              <h4>Choices That Led Here</h4>
              <ul id="investorWhyList" class="investor-list"></ul>
            </section>
            <section class="chart-card investor-card investor-span-6">
              <h4>Strengths</h4>
              <ul id="investorStrengthsList" class="investor-list"></ul>
            </section>
            <section class="chart-card investor-card investor-span-6">
              <h4>Weaknesses</h4>
              <ul id="investorWeaknessesList" class="investor-list"></ul>
            </section>
            <section class="chart-card investor-card investor-span-6">
              <h4>Likely MBTI Tendencies</h4>
              <ul id="investorMbtiList" class="investor-list"></ul>
            </section>
            <section class="chart-card investor-card investor-span-6">
              <h4>Popular Investors With Similar Style</h4>
              <div id="investorPopular" class="investor-alike"></div>
            </section>
          </div>

          <div class="row investor-actions-row">
            <button id="backToResultBtn" type="button" class="ghost">Back To Result</button>
            <button id="shareResultBtn" type="button" class="ghost share-result-trigger">Share Result</button>
            <button id="newGameFromInvestorBtn" type="button">Start New Simulation</button>
            <div id="shareResultMenu" class="share-result-menu hidden">
              <button id="shareResultLinkBtn" type="button" class="ghost">Copy Share Link</button>
              <button id="shareResultImageBtn" type="button" class="ghost">Share Image</button>
            </div>
          </div>
        </div>
      </div>

    </section>
  </main>

  <footer>
    <a class="footer-contact-btn" href="mailto:tgrkhwang@gmail.com" aria-label="Contact by email">Contact</a>
    Copyright (c) 2026 InvestoLab. All rights reserved.
  </footer>

  <script src="simulator.js?v=20260228b"></script>
</body>
</html>

























